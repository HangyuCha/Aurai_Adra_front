/* 페이지 래퍼: 내부 스크롤 환경에 맞춰 여백 간결화 */
.stage {
  position: relative;
  width: 100%;
  padding: 32px 0 56px; /* 더 여유 있게 */
  display: flex;
  flex-direction: column;
  gap: 28px;
  height: 100%;
  box-sizing: border-box;
  overflow: hidden;
}
.stage::before {
  content: '';
  position: absolute;
  inset: 0;
  background: transparent; /* 연한 회색 제거 */
  z-index: 0;
  pointer-events: none;
}
/* 아주 미세한 노이즈 질감 */
.stage::after { display:none; }

/* 로컬 돌아가기 버튼 래퍼 */
.headBack {
  width:100%;
  display:flex;
  justify-content:flex-end; /* 오른쪽 정렬 */
  /* 프로필 버튼(우측 고정 20px + 48px 크기 + 간격 16px)과 겹치지 않도록 여유 패딩 */
  padding-right:96px; /* 20 + 48 + (간격 여유 28) */
  margin:0 0 12px;
  position:relative;
}

@media (max-width: 720px){
  .headBack { padding-right:84px; }
}
@media (max-width: 560px){
  /* 화면이 좁을 때 프로필 버튼과 자연스럽게 줄 간격만 확보 */
  .headBack { padding-right:72px; }
}

/* 메인 레이아웃: 고정 폭/절대 배치 제거 → 반응형 플렉스 */
.canvas {
  position: relative;
  width: 100%;
  max-width: 1180px; /* 약간 줄여 집중도 상승 */
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 32px;
  padding: 0 48px 0;
  box-sizing: border-box;
  min-height: 0;
  flex: 1 1 auto;
  z-index: 1;
}

/* 배경 */
/* 배경 레이어 필요 없음 → 제거 */
.bgMain { display:none; }
/* 회색 상단 바는 제거 */
.bgTopBar { display: none; }

/* 타이틀 */
.title {
  flex: 0 0 auto;
  margin: 0 0 4px;
  font-family: 'Jua', sans-serif;
  font-size: clamp(30px, 3vw, 40px);
  line-height: 1.05;
  color: #111; /* 단색 */
  letter-spacing: .5px;
  position: relative;
}

/* 프로필 클러스터 (아바타 + 정보) */
/* 프로필 클러스터 (아바타 + 정보) : 글래스 카드 버전 복구 */
.profileCluster {
  display: flex;
  gap: 48px;
  align-items: stretch;
  position: relative;
  backdrop-filter: blur(14px) saturate(1.2);
  background: #ffffff; /* 완전 흰색 - 내부 색조 제거 */
  border: 1px solid rgba(255,255,255,.55);
  box-shadow: 0 12px 32px -4px rgba(34,42,56,.18), 0 2px 6px rgba(0,0,0,.08);
  padding: 42px 48px 46px;
  border-radius: 36px;
  overflow: hidden; /* 내부 그라데이션 클리핑 */
}
.profileCluster::before {
  content: none; /* 그라데이션 제거 */
}
.profileCluster::after { content:none; }
/* 내용이 그라데이션 위로 오도록 */
.profileCluster > * { position:relative; z-index:1; }
/* 프레임 제거로 before 레이어 사용 안 함 */
.profileCluster::before { display:none; }

.avatarBox { position: relative; display:flex; cursor: pointer; }
.bigAvatar {
  position: relative;
  width: clamp(220px, 60vw, 440px);
  aspect-ratio: 2/3;
  object-fit: contain;
  border-radius: 0; /* 카드 라운드 제거 */
  box-shadow: none; /* 그림자 제거로 카드 느낌 제거 */
  background: transparent; /* 내부 추가 톤 제거 */
}
.avatarBadge {
  position: absolute;
  bottom: 10px; left: 12px;
  background: #222; /* 단색 */
  color: #fff;
  font-family: 'Jua', sans-serif;
  font-size: 18px;
  padding: 6px 14px 7px;
  border-radius: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,.28);
  letter-spacing: .5px;
  display:flex; align-items:center; gap:6px;
}

/* 아바타 클릭 힌트 */
.avatarHint {
  position: absolute;
  right: 8px;
  top: 8px;
  background: rgba(255,255,255,0.9);
  color: #111;
  font-family: 'Jua', sans-serif;
  font-size: 14px;
  padding: 6px 10px;
  border-radius: 14px;
  box-shadow: 0 6px 14px rgba(0,0,0,.18);
  animation: floatUp 2.4s ease-in-out infinite;
}
@keyframes floatUp {
  0%, 100% { transform: translateY(0); opacity: 1; }
  50% { transform: translateY(-4px); opacity: .9; }
}

/* 정보 패널 → 재정렬 */
.infoPanel {
  position: relative;
  flex: 1 1 auto;
  min-width: 380px;
  max-width: 640px;
  display: flex;
  flex-direction: column;
  gap: 40px;
  padding-top: 4px;
}

/* 메타 리스트 */
.metaList { display: flex; flex-direction: column; gap: 24px; }
.metaItem { display: flex; flex-direction: column; gap: 6px; }
.metaLabel {
  font-size: clamp(16px, 2.6vw, 22px); font-family: 'Jua', sans-serif; letter-spacing: 1px;
  color: #555; text-transform: uppercase; position:relative; padding-left:10px;
}
.metaLabel::before { content:''; position:absolute; left:0; top:50%; width:4px; height:4px; background:#ff7a34; border-radius:50%; transform:translateY(-50%); }
.metaValue { font-family:'Jua', sans-serif; font-size: clamp(46px,4.4vw,68px); line-height:1.06; color:#111; text-shadow:0 2px 4px rgba(0,0,0,.18); }

/* 이전 row 스타일 사용 X → 호환 위해 유지 (미사용 시 제거 가능) */

/* (중복되던 .bigAvatar 정의 제거됨) */

/* 오른쪽 정보 패널: 별칭/나이/버튼을 한 컬럼으로 */
/* (구) infoPanel 정의는 위에서 재정의 */

/* 행: 라벨 ▪ 값 */
/* (구) row / label / divider 제거 → 필요 시 추후 삭제 */

/* 패널 하단 액션: 나이 밑에 바로 배치됨 */
.panelActions {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 18px;
}

/* 큰 흰색 pill 버튼 */
.sharePrimary {
  background:linear-gradient(135deg,#59A3FF,#326bcc);
  color:#fff; border:0; cursor:pointer;
  border-radius:30px;
  box-shadow:0 14px 36px -10px rgba(0,0,0,.28),0 4px 10px rgba(0,0,0,.18);
  font-family:'Jua',sans-serif; font-weight:400;
  width:100%; height:78px;
  font-size:clamp(34px,3.2vw,46px);
  display:flex; align-items:center; justify-content:center;
  position:relative; overflow:hidden;
  letter-spacing:.5px;
  transition:transform .35s cubic-bezier(.16,.8,.3,1), box-shadow .4s;
}
.sharePrimary:hover { transform:translateY(-6px); box-shadow:0 24px 48px -16px rgba(0,0,0,.34),0 6px 16px rgba(0,0,0,.22); }
.sharePrimary:active { transform:translateY(-2px) scale(.98); }
.sharePrimary:focus-visible { outline:4px solid #59A3FF; outline-offset:4px; }

/* 아래 작은 텍스트 버튼 */
.withdrawLink {
  background: transparent; border: none; cursor: pointer;
  color: #333; font-family: 'Jua', sans-serif; font-size: 18px;
  text-shadow: 0 2px 4px rgba(0,0,0,.18);
  align-self: center;
  padding: 2px 6px; /* 포인터 영역 살짝 확대 */
  text-decoration: none;
  transition: color .18s ease, background .25s;
  border-radius: 8px;
  position: relative;
}
.withdrawLink:hover, .withdrawLink:focus-visible { color:#d12c2c; text-decoration: underline; outline:none; }
.inlineActions .withdrawLink:first-of-type:hover, .inlineActions .withdrawLink:first-of-type:focus-visible { color:#222; }

.withdrawLink:hover, .withdrawLink:focus-visible {
  color: #d12c2c; /* 살짝 강조 (적당한 붉은톤) */
  text-decoration: underline;
  outline: none;
}

.inlineActions .withdrawLink:first-of-type:hover, .inlineActions .withdrawLink:first-of-type:focus-visible {
  /* 비밀번호 바꾸기(첫 번째)는 중립 톤 강조 */
  color: #222; /* 덜 공격적인 색상 */
}

/* 인라인 텍스트 액션 (비밀번호 변경 | 회원 탈퇴) */
.inlineActions { display:flex; align-items:center; gap:18px; align-self:center; margin-top:4px; }
.vertBar { font-family:'Jua', sans-serif; font-size:18px; color:#888; user-select:none; line-height:1; transform:translateY(-1px); }

/* 더 작은 높이/폭 대응 */
@media (max-width: 1080px) { .profileCluster { gap:40px; padding:38px 40px 42px; } }
@media (max-width: 920px) { .profileCluster { flex-direction: column; align-items:center; text-align:center; gap:38px; }
  .infoPanel { max-width:100%; min-width:0; }
  .avatarBox { justify-content:center; }
  .metaList { align-items:center; }
  .metaItem { align-items:center; }
  .metaLabel { padding-left:0; }
  .metaLabel::before { display:none; }
  .avatarBadge { left:50%; transform:translateX(-50%); bottom:12px; }
}
@media (max-width: 640px) {
  .canvas { padding: 0 20px; }
  .profileCluster { padding:34px 30px 38px; border-radius:30px; gap:34px; }
  .bigAvatar { width: clamp(200px, 80vw, 400px); }
  .sharePrimary { height:72px; font-size: clamp(30px,6vw,42px); }
  .metaValue { font-size: clamp(38px,8.4vw,54px); }
}
@media (max-height: 820px) {
  .stage { padding: 24px 0 44px; }
  .profileCluster { padding:38px 42px; }
  .sharePrimary { height:74px; }
  .metaValue { font-size: clamp(36px,3.4vw,52px); }
}
@media (max-height: 820px) {
  .stage { padding: 16px 0 28px; }
  .canvas { gap: 40px; }
  .infoPanel { gap: 40px; }
  /* 축소 높이 환경에서도 확대된 아바타 유지 */
  .bigAvatar { width: clamp(300px, 34vw, 440px); }
  .sharePrimary { height:70px; font-size: clamp(30px, 3vw, 42px); }
  .label, .value { font-size: clamp(28px, 3vw, 44px); }
}


/* 확인 모달 */
.modalBackdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}
.modal {
  background: #fff;
  border-radius: 16px;
  width: clamp(320px, 60vw, 520px);
  padding: 28px 24px;
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
  text-align: center;
  font-family: 'Jua', sans-serif;
}
.modalTitle {
  font-size: 26px;
  margin-bottom: 18px;
}
.modalMsg {
  font-size: 20px;
  color: #333;
}
.modalActions {
  margin-top: 22px;
  display: flex;
  gap: 12px;
  justify-content: center;
}
.btnYes {
  background: #e85d5d;
  color: #fff;
  border: none;
  border-radius: 12px;
  padding: 10px 20px;
  font-size: 18px;
  cursor: pointer;
}
.btnNo {
  background: #aaa;
  color: #fff;
  border: none;
  border-radius: 12px;
  padding: 10px 20px;
  font-size: 18px;
  cursor: pointer;
}

/* 안내 팝업 하단 체크박스 행 */
.checkboxRow {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-top: 14px;
  font-size: 16px;
  color: #555;
}
.checkboxRow input {
  width: 18px;
  height: 18px;
}

/* ===================== 책 모달(풀스크린) ===================== */
.bookBackdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 3000;
}
.book {
  position: relative;
  width: min(1000px, 96vw);
  height: min(720px, 92vh);
  background: linear-gradient(90deg, #f3efe6 0%, #f7f4eb 50%, #f3efe6 100%);
  border-radius: 18px;
  box-shadow: 0 20px 60px rgba(0,0,0,.35);
  display: grid;
  grid-template-columns: 1fr 1fr;
  overflow: hidden;
}
.bookSpine {
  position: absolute;
  left: 50%; top: 0; bottom: 0;
  width: 6px;
  transform: translateX(-50%);
  background: linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,.14));
  box-shadow: inset 0 0 10px rgba(0,0,0,.12);
}
.bookPageLeft, .bookPageRight { padding: 28px 24px 24px; position: relative; }
.bookPageLeft { display:flex; flex-direction:column; height: 100%; min-height: 0; }
.bookTitle { font-family: 'Jua', sans-serif; font-size: clamp(28px, 3.4vw, 36px); margin: 0 0 10px; }
.bookSummary { display:flex; flex-direction:column; gap: 8px; font-size: 16px; color:#333; }
.bookGuide { margin-top: 14px; font-size: clamp(16px, 2vw, 18px); color: #444; line-height: 1.6; }
.bookGuide p { margin: 4px 0; }

.bookPageRight {
  background: repeating-linear-gradient(
    to bottom,
    rgba(0,0,0,0.04),
    rgba(0,0,0,0.04) 1px,
    transparent 1px,
    transparent 28px
  );
  overflow: auto;
}
.entryList { list-style: none; margin: 0; padding: 0 6px; display:flex; flex-direction:column; gap: 14px; }
.entryItem { background: rgba(255,255,255,0.8); border-radius: 10px; padding: 10px 12px; box-shadow: 0 4px 10px rgba(0,0,0,.08); }
.entryDate { font-size: 13px; color:#666; margin-bottom: 6px; }
.entryText { font-size: 16px; color:#222; }

.bookClose {
  position: absolute;
  top: 10px; right: 12px;
  background: #333;
  color: #fff;
  border: 0;
  border-radius: 12px;
  padding: 8px 12px;
  cursor: pointer;
  font-size: 14px;
  z-index: 2;
}

@media (max-width: 720px) {
  .book { width: 96vw; height: 86vh; grid-template-columns: 1fr; }
  .bookSpine { display:none; }
  .bookPageLeft { border-bottom: 1px solid rgba(0,0,0,.06); }
}

/* 책 페이지: 배움나이 차트 */
.bookChart {
  margin-top: 12px;
  width: 100%;
  height: 160px;
  background: #fff;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 12px;
  overflow: hidden;
}
.chartSvg { width: 100%; height: 100%; display: block; }
.chartEmpty { width: 100%; height: 100%; display:flex; align-items:center; justify-content:center; color:#666; font-size: 14px; background:#fff; }

/* 선택 리스트 (연령대) */
.bookChoices { margin-top: 16px; display: flex; flex-direction: column; gap: 12px; flex: 1 1 auto; overflow-y: auto; overflow-x: hidden; padding-right: 4px; min-height: 0; }
.bookChoices { -webkit-overflow-scrolling: touch; overscroll-behavior: contain; }
.choiceItem { display:flex; align-items:center; justify-content:space-between; width: 100%; background:#fff; border:1px solid rgba(0,0,0,.06); border-radius: 14px; padding: 14px 16px; font-size: clamp(16px, 2.2vw, 20px); color:#222; box-shadow: 0 6px 14px rgba(0,0,0,.06); cursor: pointer; transition: transform .15s ease, box-shadow .2s ease, background .2s ease; }
.choiceItem:hover { transform: translateY(-2px); box-shadow: 0 10px 18px rgba(0,0,0,.08); }
.choiceActive { background: linear-gradient(135deg,#59A3FF,#326bcc); color:#fff; border-color: transparent; }
.choiceDisabled { opacity: .45; cursor: not-allowed; }
.choiceLabel { font-family: 'Jua', sans-serif; }
.choiceCount { min-width: 28px; height: 28px; border-radius: 999px; background: rgba(0,0,0,.06); color:#333; display:flex; align-items:center; justify-content:center; font-size: 14px; padding: 0 8px; }
.choiceActive .choiceCount { background: rgba(255,255,255,.25); color: #fff; }

/* 나이 변화 리스트 */
.historyList { list-style: none; margin: 8px 0 0; padding: 0; display: flex; flex-direction: column; gap: 10px; }
.historyItem { display: flex; align-items: center; justify-content: space-between; background: #f6f7fb; border-radius: 12px; padding: 10px 14px; }
.historyWhen { font-size: 14px; color: #666; }
.historyAge { font-size: 18px; font-family: 'Jua', sans-serif; color: #111; }
.historyEmpty { font-size: 16px; color: #666; padding: 10px 0; }
